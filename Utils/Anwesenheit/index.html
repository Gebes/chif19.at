<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <script>

        let app;

        function validateForm() {
            var x = document.forms["myForm"]["fname"].value;
            /* if (x == "") {
                alert("Name must be filled out");
                return false;
            } else {
                var missing = []
                names.forEach(name => {
                    if (!x.toLowerCase().includes(name.toLowerCase()))
                        missing.push(name);
                })


                if (missing.length == 0)
                    alert("Alle da")
                else
                    alert("Es fehlen: " + missing +" aber dafür sind " + (names.length-missing.length) + " da")
                return false;

            }*/
            app.checkUsers(x)
            return false;
        }


        window.addEventListener('load', () => {


            app = new Vue({
                el: '#app',
                data: {
                    input: "",
                    users: [{ id: 1, name: "DRAXLER", anwesend: false },
                    { id: 2, name: "EICHWALD", anwesend: false },
                    { id: 3, name: "GRUBER", anwesend: false },
                    { id: 4, name: "GUELLY", anwesend: false },
                    { id: 5, name: "HUSSLER", anwesend: false },
                    { id: 6, name: "KIENDLER", anwesend: false },
                    { id: 7, name: "KRASSNIGG", anwesend: false },
                    { id: 8, name: "KROPF", anwesend: false },
                    { id: 9, name: "KULMER", anwesend: false },
                    { id: 10, name: "LACKNER", anwesend: false },
                    { id: 11, name: "MALEK", anwesend: false },
                    { id: 12, name: "MARTINZ", anwesend: false },
                    { id: 13, name: "MENHART", anwesend: false },
                    { id: 14, name: "MIKARA", anwesend: false },
                    { id: 15, name: "PFINGSTL", anwesend: false },
                    { id: 16, name: "PIRKER", anwesend: false },
                    { id: 17, name: "PLLANA", anwesend: false },
                    { id: 18, name: "PRECHTL", anwesend: false },
                    { id: 19, name: "REITBAUER", anwesend: false },
                    { id: 20, name: "SAVU", anwesend: false },
                    { id: 21, name: "SCHILLINGER", anwesend: false },
                    { id: 22, name: "SCHRUTH", anwesend: false },
                    { id: 23, name: "SOMMER", anwesend: false },
                    { id: 24, name: "STUERZL", anwesend: false },
                    { id: 25, name: "SVOBODA", anwesend: false },
                    { id: 26, name: "TESCH", anwesend: false },
                    { id: 27, name: "THUSWOHL", anwesend: false },
                    { id: 28, name: "WEINHANDL", anwesend: false },
                    { id: 29, name: "ZIRNGAST", anwesend: false }]

                },
                methods: {
                    checkUsers: () => {
                        app.input = document.getElementById("names").value.toLowerCase();

                        for (let user of app.users) {
                            user.anwesend = (app.input.includes(user.name.toLowerCase()))

                        }
                        app.users.sort((a, b) => b.anwesend - a.anwesend)
                    },


                }
            })
        })

    </script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">
    <link rel="stylesheet" href="https://milligram.io/styles/main.css" />
    <title>CHIF19</title>
    <script src="https://unpkg.com/vue"></script>
    <style>
        p {
            margin-top: -15px;
        }
    </style>

</head>

<body>
    <div id="app">
        <main class="wrapper">
            <nav class="navigation">
                <section class="container">
                    <a class="navigation-title">
                        Anwesenheits Checker
                    </a>
                </section>
            </nav>

            <section class="container">


                <h3>Wie verwenden?</h3>
                <p>In Teams rauszoomen bis man alle Teilnehmer sieht. Teilnehmer markieren und kopieren.</p>
                <p>Nachdem Einfügen auf "Überprüfen" drücken.</p>
                <br>

                <fieldset>
                    <label for="names">Überprüft wer fehlt</label><input id="names" type="text">
                    <button v-on:click="checkUsers">Überprüfen</button>
                </fieldset>

                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Ist anwesend</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="user in users" :key="user.name">
                            <td>{{ user.id }}</td>
                            <td>{{ user.name }}</td>
                            <td>{{ user.anwesend ? "Anwesend" : ""}}</td>
                        </tr>
                    </tbody>
                </table>



            </section>
        </main>
    </div>
</body>

</html>